<?xml version="1.0" encoding="UTF-8" ?>
<XMLDB PATH="mod/adastra/db" VERSION="20201113" COMMENT="XMLDB file for Moodle mod_adastra"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="../../../lib/xmldb/xmldb.xsd"
>
  <TABLES>
    <TABLE NAME="adastra" COMMENT="Stores the adastra activity module instances.">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="course" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" COMMENT="ID of the course this activity is part of."/>
        <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" COMMENT="The name of the activity module instance"/>
        <FIELD NAME="timecreated" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false" COMMENT="Timestamp of when the instance was added to the course."/>
        <FIELD NAME="timemodified" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false" COMMENT="Timestamp of when the instance was last modified."/>
        <FIELD NAME="intro" TYPE="text" NOTNULL="false" SEQUENCE="false" COMMENT="Activity description."/>
        <FIELD NAME="introformat" TYPE="int" LENGTH="4" NOTNULL="true" DEFAULT="0" SEQUENCE="false" COMMENT="The format of the intro field."/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="fk_course" TYPE="foreign" FIELDS="course" REFTABLE="course" REFFIELDS="id"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="adastra_course_settings" COMMENT="Course-wide settings concerning Ad Astra exercises">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="course" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" COMMENT="Moodle course ID"/>
        <FIELD NAME="apikey" TYPE="char" LENGTH="100" NOTNULL="false" SEQUENCE="false" COMMENT="Secret API key needed to authorize the use of the HTTP course API in the exercise service server."/>
        <FIELD NAME="configurl" TYPE="char" LENGTH="255" NOTNULL="false" SEQUENCE="false" COMMENT="Configuration URL from which the course exercises configuration is downloaded for automatic setup."/>
        <FIELD NAME="sectionnum" TYPE="int" LENGTH="2" NOTNULL="false" SEQUENCE="false" COMMENT="Moodle course section number (0-N) which new activities are added to."/>
        <FIELD NAME="modulenumbering" TYPE="int" LENGTH="2" NOTNULL="true" DEFAULT="1" SEQUENCE="false" COMMENT="Numbering style for exercise rounds."/>
        <FIELD NAME="contentnumbering" TYPE="int" LENGTH="2" NOTNULL="true" DEFAULT="1" SEQUENCE="false" COMMENT="Numbering style for exercises (content under rounds)."/>
        <FIELD NAME="lang" TYPE="char" LENGTH="255" NOTNULL="true" DEFAULT="en" SEQUENCE="false" COMMENT="Language of the course defined by the backend. Example single value: en, multiple values: |en|fi|."/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="course" UNIQUE="true" FIELDS="course"/>
      </INDEXES>
    </TABLE>
    <TABLE NAME="adastra_categories" COMMENT="Each learning object belongs to a category.">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="course" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        <FIELD NAME="status" TYPE="int" LENGTH="1" NOTNULL="true" SEQUENCE="false" COMMENT="Ready = 0. Hidden = 1. No total points = 2."/>
        <FIELD NAME="name" TYPE="char" LENGTH="35" NOTNULL="true" SEQUENCE="false" COMMENT="Name that is displayed to users. Name should be unique within a course. If the value starts with |, it contains multiple language versions |en:val|fi:val|"/>
        <FIELD NAME="pointstopass" TYPE="int" LENGTH="7" NOTNULL="true" DEFAULT="0" SEQUENCE="false" COMMENT="Min points to pass a category."/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="course" UNIQUE="false" FIELDS="course"/>
      </INDEXES>
    </TABLE>
    <TABLE NAME="adastra_lobjects" COMMENT="Learning objects: base class table for exercises and chapters. Each object belongs to a round.">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="status" TYPE="int" LENGTH="1" NOTNULL="true" SEQUENCE="false" COMMENT="Ready = 0. Hidden = 1. Maintenance = 2. Unlisted = 3."/>
        <FIELD NAME="categoryid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" COMMENT="Category ID. Each learning object belongs to a category."/>
        <FIELD NAME="roundid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" COMMENT="Exercise round ID."/>
        <FIELD NAME="parentid" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false" COMMENT="If null, the object is listed under the round. If parent is set, the chapter is listed under the parent object."/>
        <FIELD NAME="ordernum" TYPE="int" LENGTH="4" NOTNULL="true" SEQUENCE="false" COMMENT="Order for listing the learning objects under the round. Smaller comes first."/>
        <FIELD NAME="remotekey" TYPE="char" LENGTH="128" NOTNULL="true" SEQUENCE="false" COMMENT="Unique exercise key in the exercise service server. ('key' in exercise service configuration.) Should be unique within the round."/>
        <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" COMMENT="Name that is displayed to users. If the value starts with |, it contains multiple language versions |en:val|fi:val|."/>
        <FIELD NAME="serviceurl" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" COMMENT="URL of the exercise service for this  chapter. If the value starts with |, it contains multiple language versions |en:val|fi:val|."/>
        <FIELD NAME="usewidecolumn" TYPE="int" LENGTH="1" NOTNULL="true" DEFAULT="0" SEQUENCE="false" COMMENT="If 1 (true), the info column is removed in chapter/exercise pages in order to have more space for the content."/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="categoryid" TYPE="foreign" FIELDS="categoryid" REFTABLE="adastra_categories" REFFIELDS="id"/>
        <KEY NAME="roundid" TYPE="foreign" FIELDS="roundid" REFTABLE="adastra" REFFIELDS="id"/>
        <KEY NAME="parentid" TYPE="foreign" FIELDS="parentid" REFTABLE="adastra_lobjects" REFFIELDS="id" COMMENT="Foreign key to another learning object."/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="remotekey" UNIQUE="false" FIELDS="remotekey" COMMENT="Unique false, because it might only be unique within a round."/>
      </INDEXES>
    </TABLE>
    <TABLE NAME="adastra_exercises" COMMENT="Exercise that accepts submissions and sends them to the serviceurl for grading.">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="lobjectid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" COMMENT="Foreign key to learning object it."/>
        <FIELD NAME="maxsubmissions" TYPE="int" LENGTH="4" NOTNULL="true" DEFAULT="10" SEQUENCE="false" COMMENT="Max number of submissions allowed. Zero for no limit."/>
        <FIELD NAME="pointstopass" TYPE="int" LENGTH="7" NOTNULL="true" DEFAULT="0" SEQUENCE="false" COMMENT="Min points to pass the exercise."/>
        <FIELD NAME="maxpoints" TYPE="int" LENGTH="7" NOTNULL="true" DEFAULT="100" SEQUENCE="false" COMMENT="Max points available in the exercise."/>
        <FIELD NAME="gradeitemnumber" TYPE="int" LENGTH="4" NOTNULL="true" SEQUENCE="false" COMMENT="Moodle gradebook item number. 0 is reserved for the exercise round and each exercise needs a unique item number within the round."/>
        <FIELD NAME="maxsbmssize" TYPE="int" LENGTH="9" NOTNULL="true" DEFAULT="1048576" SEQUENCE="false" COMMENT="Maximum submission file size in bytes for one submitted file. Zero for no limit."/>
        <FIELD NAME="allowastviewing" TYPE="int" LENGTH="1" NOTNULL="true" DEFAULT="0" SEQUENCE="false" COMMENT="Is an assistant (non-editing teacher) allowed to inspect submissions in this exercise? Yes = 1, No = 0."/>
        <FIELD NAME="allowastgrading" TYPE="int" LENGTH="1" NOTNULL="true" DEFAULT="0" SEQUENCE="false" COMMENT="Is an assistant (non-editing teacher) allowed to edit feedback and points for submissions in this exercise? Yes = 1, No = 0."/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="lobjectid" TYPE="foreign" FIELDS="lobjectid" REFTABLE="adastra_lobjects" REFFIELDS="id"/>
      </KEYS>
    </TABLE>
    <TABLE NAME="adastra_chapters" COMMENT="Course chapters offer and organize material as one-page chapters. Exercises can be embedded in chapters.">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="lobjectid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" COMMENT="Foreign key to learning object it."/>
        <FIELD NAME="generatetoc" TYPE="int" LENGTH="1" NOTNULL="true" DEFAULT="0" SEQUENCE="false" COMMENT="Generate table of contents? Yes = 1, No = 0."/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="lobjectid" TYPE="foreign" FIELDS="lobjectid" REFTABLE="adastra_lobjects" REFFIELDS="id"/>
      </KEYS>
    </TABLE>
  </TABLES>
</XMLDB>
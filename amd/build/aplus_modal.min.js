define ("mod_adastra/aplus_modal",["jquery","core/event","mod_adastra/aplus_highlightcode","theme_boost/dropdown","theme_boost/modal"],function(a,b){(function(b){var d={loader_selector:".modal-progress",loader_text_selector:".progress-bar",title_selector:".modal-title",content_selector:".modal-body",error_message_attribute:"data-msg-error"};function c(a,c){this.element=b(a);this.settings=b.extend({},d,c);this.init()}b.extend(c.prototype,{init:function init(){this.loader=this.element.find(this.settings.loader_selector);this.loaderText=this.loader.find(this.settings.loader_text_selector);this.title=this.element.find(this.settings.title_selector);this.content=this.element.find(this.settings.content_selector);this.messages={loading:this.loaderText.text(),error:this.loaderText.attr(this.settings.error_message_attribute)}},run:function run(a,b){switch(a){case"open":this.open(b);break;case"error":this.showError(b);break;case"content":this.showContent(b);break;}},open:function open(a){this.title.hide();this.content.hide();this.loaderText.removeClass("bg-danger").addClass("progress-bar-animated").text(a||this.messages.loading);this.loader.show();this.element.on("hidden.bs.modal",function(){b(".dropdown-toggle").dropdown()});this.element.modal("show")},showError:function showError(a){this.loaderText.removeClass("progress-bar-animated").addClass("bg-danger").text(a||this.messages.error)},showContent:function showContent(b){this.loader.hide();if(b.title){this.title.text(b.title);this.title.show()}if(b.content instanceof a){this.content.empty().append(b.content)}else{this.content.html(b.content)}this.content.show();return this.content}});b.fn.aplusModal=function(a,d,e){return this.each(function(){var f=b.data(this,"plugin_aplusModal");if(!f){f=new c(this,e);b.data(this,"plugin_aplusModal",f)}return f.run(a,d)})}})(a,window,document);(function(a,b){var d={modal_selector:"#page-modal",file_modal_selector:"#file-modal",body_regexp:/<body[^>]*>([\s\S]*)<\/body>/i,file:!1};function c(b,c){this.element=a(b);this.settings=a.extend({},d,c);this.init()}a.extend(c.prototype,{init:function init(){var c=this.element,d=this.settings;c.on("click",function(e){e.preventDefault();var f=c.attr("href");if(""===f||"#"==f){return!1}var g=a(d.file?d.file_modal_selector:d.modal_selector);g.aplusModal("open");a.get(f,function(e){if(d.file){var f=a("<pre/>").text(e);g.aplusModal("content",{title:c.text(),content:f});f.highlightCode()}else{var h=e.match(d.body_regexp);if(null!==h&&2==h.length){e=h[1]}var i=g.aplusModal("content",{content:e});i.find(".file-modal").aplusModalLink({file:!0});i.find("pre.hljs").highlightCode();b.notifyFilterContentUpdated(d.modal_selector)}}).fail(function(){g.aplusModal("error")})})}});a.fn.aplusModalLink=function(b){return this.each(function(){if(!a.data(this,"plugin_aplusModalLink")){a.data(this,"plugin_aplusModalLink",new c(this,b))}})}})(a,b,window,document);return{}});
//# sourceMappingURL=aplus_modal.min.js.map
